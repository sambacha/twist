(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{268:function(e,t,n){e.exports=n(641)},295:function(e,t){},305:function(e,t){},319:function(e,t){},330:function(e,t){},334:function(e,t){},336:function(e,t){},352:function(e,t){},360:function(e,t){},365:function(e,t){},373:function(e,t){},378:function(e,t){},385:function(e,t){},389:function(e,t){},436:function(e,t){},443:function(e,t){},445:function(e,t){},477:function(e,t){},482:function(e,t){},484:function(e,t){},508:function(e,t){},541:function(e,t){},641:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(7),s=n(21),c=n(20),u=n.n(c),i=n(0),d=n.n(i),p=n(265);const m=d.a.createElement("svg",{version:"1.1",viewBox:"0 0 32 32",width:"28px",height:"28px",fill:"#2b71ff"},d.a.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),d.a.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"},d.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"})));var l=()=>d.a.createElement(p.a,{align:"center",justify:"center"},m),f=n(36),k=n.n(f),h=n(259),b=n(659),g=n(658),T=n(655),w=n(654),v=n(657),A=n(653),x=n(656),O=n(11),j=n(139),y=n(91),E=n(55),S=n.n(E),F=n(260),C=n(18),R=n.n(C),P=n(37),N=n.n(P);const L="https://paraswap.io/api/v1";var D=class{constructor(e){this.tokensReady=void 0,this.network=void 0,this.network=e,this.tokensReady=this.fetchTokens()}fetchTokens(){var e=this;return Object(o.a)(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a.get("".concat(L,"/tokens/").concat(e.network)).then(e=>e.data);case 2:return n=t.sent,t.abrupt("return",n.tokens.map(e=>Object(O.a)(Object(O.a)({},e),{},{address:e.address.toLowerCase()})));case 4:case"end":return t.stop()}},t)}))()}_fetchParaswapPrices({sourceToken:e,destinationToken:t,sourceAmount:n}){return R.a.get("".concat(L,"/prices/").concat(this.network,"/").concat(e,"/").concat(t,"/").concat(n)).then(e=>e.data)}fetchQuote(e){var t=this;return Object(o.a)(a.a.mark(function n(){var r,o,s,c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.sourceToken,o=e.destinationToken,s=e.sourceAmount,n.next=3,t._fetchParaswapPrices({sourceToken:r,destinationToken:o,sourceAmount:s});case 3:return c=n.sent,n.abrupt("return",{sourceToken:r,destinationToken:o,sourceAmount:s,destinationAmount:c.priceRoute.amount});case 5:case"end":return n.stop()}},n)}))()}fetchTrade({sourceToken:e,destinationToken:t,sourceAmount:n,userAddress:r,slippage:s}){var c=this;return Object(o.a)(a.a.mark(function o(){var u,i,d,p,m,l,f,k,h;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c._fetchParaswapPrices({sourceToken:e,destinationToken:t,sourceAmount:n});case 2:return u=a.sent,i=1+s/100,d=new N.a(u.priceRoute.amount).div(i).toString(),p={priceRoute:u.priceRoute,srcToken:e,destToken:t,srcAmount:n,destAmount:d,userAddress:r,referrer:"airswap.io",payTo:""},a.next=8,R.a.post("".concat(L,"/transactions/").concat(c.network),p).then(e=>e.data);case 8:return m=a.sent,l=m.from,f=m.to,k=m.value,h=m.data,a.abrupt("return",{from:l,to:f,value:k,data:h,sourceToken:e,destinationToken:t,sourceAmount:n,destinationAmount:u.priceRoute.amount});case 11:case"end":return a.stop()}},o)}))()}},M=n(72),Q=n.n(M);const I="https://api.1inch.exchange/v1.1";var _=class{constructor(e){if(this.tokensReady=void 0,1!==e)throw new Error("only mainnet is supported");this.tokensReady=this.fetchTokens()}fetchTokens(){return Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(I,"/tokens")).then(e=>e.data);case 2:return t=e.sent,e.abrupt("return",u.a.values(t).map(e=>Object(O.a)(Object(O.a)({},e),{},{address:e.address.toLowerCase()})));case 4:case"end":return e.stop()}},e)}))()}fetchQuote(e){return Object(o.a)(a.a.mark(function t(){var n,r,o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.sourceToken,r=e.destinationToken,o=e.sourceAmount,t.next=3,R.a.get("".concat(I,"/quote?fromTokenAddress=").concat(n,"&toTokenAddress=").concat(r,"&amount=").concat(o,"&disableEstimate=false&slippage=1")).then(e=>e.data);case 3:return s=t.sent,t.abrupt("return",{sourceToken:n,destinationToken:r,sourceAmount:o,destinationAmount:s.toTokenAmount});case 5:case"end":return t.stop()}},t)}))()}fetchTrade({sourceToken:e,destinationToken:t,sourceAmount:n,userAddress:r,slippage:s}){return Object(o.a)(a.a.mark(function o(){var c,u,i,d,p,m;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c={fromTokenAddress:e,toTokenAddress:t,amount:n,fromAddress:r,slippage:s,disableEstimate:!0},a.next=3,R.a.get("".concat(I,"/swapQuote?").concat(Q.a.stringify(c))).then(e=>e.data);case 3:return u=a.sent,i=u.to,d=u.data,p=u.value,m=u.toTokenAmount,a.abrupt("return",{sourceToken:e,destinationToken:t,sourceAmount:n,destinationAmount:m,to:i,data:d,value:p,from:r});case 6:case"end":return a.stop()}},o)}))()}};const B="https://api.totle.com";function q({sourceToken:e,destinationToken:t,sourceAmount:n,includeTransaction:r,slippage:a,userAddress:o}){return{swaps:[{sourceAsset:e,destinationAsset:t,sourceAmount:n,maxExecutionSlippagePercent:"".concat(a)}],config:{strategy:{main:"curves",backup:"curves"},skipBalanceChecks:!1,transactions:r},address:o,apiKey:"41a14d82-36b0-457e-8c16-b86f2f19d094"}}function z({sourceToken:e,destinationToken:t,sourceAmount:n,includeTransaction:r}){return{swap:{sourceAsset:e,destinationAsset:t,sourceAmount:n,maxMarketSlippagePercent:"10",maxExecutionSlippagePercent:"3"},config:{transactions:r}}}var G=class{constructor(e){if(this.tokensReady=void 0,1!==e)throw new Error("only mainnet is supported");this.tokensReady=this.fetchTokens()}fetchTokens(){return Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(B,"/tokens")).then(e=>e.data);case 2:return t=e.sent,e.abrupt("return",t.tokens.map(e=>Object(O.a)(Object(O.a)({},e),{},{address:e.address.toLowerCase()})));case 4:case"end":return e.stop()}},e)}))()}_fetchTotleQuote({sourceToken:e,destinationToken:t,sourceAmount:n,includeTransaction:r}){return Object(o.a)(a.a.mark(function o(){return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R.a.post("https://api.totle.com/swap",z({sourceToken:e,destinationToken:t,sourceAmount:n,includeTransaction:r})).then(e=>e.data);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)}))()}_fetchTotleTrade({sourceToken:e,destinationToken:t,sourceAmount:n,includeTransaction:r,slippage:s,userAddress:c}){return Object(o.a)(a.a.mark(function o(){var u;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u=q({sourceToken:e,destinationToken:t,sourceAmount:n,includeTransaction:r,userAddress:c,slippage:s}),a.next=3,R.a.post("https://api.totle.com/swap",u).then(e=>e.data);case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},o)}))()}fetchQuote({sourceToken:e,destinationToken:t,sourceAmount:n}){var r=this;return Object(o.a)(a.a.mark(function o(){var s;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r._fetchTotleQuote({sourceToken:e,destinationToken:t,sourceAmount:n,includeTransaction:!1});case 2:return s=a.sent,a.abrupt("return",{sourceToken:e,destinationToken:t,sourceAmount:n,destinationAmount:s.response.summary[0].destinationAmount});case 4:case"end":return a.stop()}},o)}))()}fetchTrade({sourceToken:e,destinationToken:t,sourceAmount:n,userAddress:r,slippage:s}){var c=this;return Object(o.a)(a.a.mark(function o(){var u,i,d,p,m;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c._fetchTotleTrade({sourceToken:e,destinationToken:t,sourceAmount:n,includeTransaction:!0,slippage:s,userAddress:r});case 2:return u=a.sent,i=u.response.transactions.find(e=>"swap"===e.type).tx,d=i.to,p=i.data,m=i.value,a.abrupt("return",{sourceToken:e,destinationToken:t,sourceAmount:n,destinationAmount:u.response.summary[0].destinationAmount,from:r,to:d,data:p,value:m});case 5:case"end":return a.stop()}},o)}))()}};const U="https://api-v2.dex.ag";var H=class{constructor(e){if(this.tokensReady=void 0,1!==e)throw new Error("only mainnet is supported");this.tokensReady=this.fetchTokens()}fetchTokens(){return R.a.get("".concat(U,"/token-list-full")).then(e=>e.data.map(e=>Object(O.a)(Object(O.a)({},e),{},{address:e.address.toLowerCase()})))}fetchDexagQuote({sourceSymbol:e,destinationSymbol:t,sourceAmountFormatted:n}){return Object(o.a)(a.a.mark(function r(){var o,s,c;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o="".concat(U,"/price?from=").concat(e,"&to=").concat(t,"&fromAmount=").concat(n,"&dex=ag"),r.next=3,R.a.get(o).then(e=>e.data);case 3:return s=r.sent,c=n*Number(s.price),r.abrupt("return",{sourceSymbol:e,destinationSymbol:t,sourceAmountFormatted:n,destinationAmountFormatted:c});case 6:case"end":return r.stop()}},r)}))()}fetchDexagTrade({sourceSymbol:e,destinationSymbol:t,sourceAmountFormatted:n,slippage:r}){return Object(o.a)(a.a.mark(function o(){var s,c,u,i,d,p,m,l,f;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=Number(n)/(1+r/100),c="".concat(U,"/trade?from=").concat(e,"&to=").concat(t,"&fromAmount=").concat(n,"&limitAmount=").concat(s,"&dex=ag"),a.next=4,R.a.get(c).then(e=>e.data);case 4:return u=a.sent,i=u.trade,d=i.to,p=i.data,m=i.value,l=u.metadata.source.price,f=n*Number(l),a.abrupt("return",{sourceSymbol:e,destinationSymbol:t,sourceAmountFormatted:n,destinationAmountFormatted:f,to:d,data:p,value:m});case 12:case"end":return a.stop()}},o)}))()}getTokenSymbolFromAddress(e){var t=this;return Object(o.a)(a.a.mark(function n(){var r,o;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.tokensReady;case 2:if(r=n.sent,o=r.find(({address:t})=>t.toLowerCase()===e.toLowerCase())){n.next=6;break}throw new Error("Token ".concat(e," not supported"));case 6:return n.abrupt("return",o.symbol);case 7:case"end":return n.stop()}},n)}))()}getAtomicAmountFromDisplayAmount(e,t){var n=this;return Object(o.a)(a.a.mark(function r(){var o,s,c;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.tokensReady;case 2:return o=r.sent,s=o.find(({address:e})=>e.toLowerCase()===t.toLowerCase()),c=s.decimals,r.abrupt("return",new N.a(e).times(Math.pow(10,c)).toString());case 5:case"end":return r.stop()}},r)}))()}getDisplayAmountFromAtomicAmount(e,t){var n=this;return Object(o.a)(a.a.mark(function r(){var o,s,c;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.tokensReady;case 2:return o=r.sent,s=o.find(({address:e})=>e.toLowerCase()===t.toLowerCase()),c=s.decimals,r.abrupt("return",(Number(e)/Math.pow(10,c)).toString());case 5:case"end":return r.stop()}},r)}))()}fetchQuote(e){var t=this;return Object(o.a)(a.a.mark(function n(){var r,o,s,c,u,i,d,p;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.sourceToken,o=e.destinationToken,s=e.sourceAmount,n.next=3,t.getTokenSymbolFromAddress(r);case 3:return c=n.sent,n.next=6,t.getTokenSymbolFromAddress(o);case 6:return u=n.sent,n.next=9,t.getDisplayAmountFromAtomicAmount(s,r);case 9:return i=n.sent,n.next=12,t.fetchDexagQuote({sourceSymbol:c,destinationSymbol:u,sourceAmountFormatted:i});case 12:return d=n.sent,n.next=15,t.getAtomicAmountFromDisplayAmount(d.destinationAmountFormatted.toString(),o);case 15:return p=n.sent,n.abrupt("return",{sourceToken:r,destinationToken:o,sourceAmount:s,destinationAmount:p});case 17:case"end":return n.stop()}},n)}))()}fetchTrade({sourceToken:e,destinationToken:t,sourceAmount:n,userAddress:r,slippage:s}){var c=this;return Object(o.a)(a.a.mark(function o(){var u,i,d,p,m,l,f,k,h;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.getTokenSymbolFromAddress(e);case 2:return u=a.sent,a.next=5,c.getTokenSymbolFromAddress(t);case 5:return i=a.sent,a.next=8,c.getDisplayAmountFromAtomicAmount(n,e);case 8:return d=a.sent,a.next=11,c.fetchDexagTrade({sourceSymbol:u,destinationSymbol:i,sourceAmountFormatted:d,slippage:s});case 11:return p=a.sent,m=p.destinationAmountFormatted,l=p.to,f=p.data,k=p.value,a.next=18,c.getAtomicAmountFromDisplayAmount(m.toString(),t);case 18:return h=a.sent,a.abrupt("return",{sourceToken:e,destinationToken:t,sourceAmount:n,destinationAmount:h,from:r,to:l,data:f,value:k});case 20:case"end":return a.stop()}},o)}))()}};const J="https://api.0x.org";var K=class{constructor(e){if(this.tokensReady=void 0,1!==e)throw new Error("only mainnet is supported");this.tokensReady=this.fetchTokens()}fetchTokens(){return Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(J,"/swap/v0/tokens")).then(e=>e.data);case 2:return t=e.sent,e.abrupt("return",t.records.map(e=>Object(O.a)(Object(O.a)({},e),{},{address:e.address.toLowerCase()})));case 4:case"end":return e.stop()}},e)}))()}fetchQuote(e){return Object(o.a)(a.a.mark(function t(){var n,r,o,s,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.sourceToken,r=e.destinationToken,o=e.sourceAmount,t.prev=1,s=Q.a.stringify({sellToken:n,buyToken:r,sellAmount:o}),t.next=5,R.a.get("".concat(J,"/swap/v0/quote?").concat(s)).then(e=>e.data);case 5:return c=t.sent,t.abrupt("return",{sourceToken:n,destinationToken:r,sourceAmount:o,destinationAmount:c.buyAmount});case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",{sourceToken:n,destinationToken:r,sourceAmount:o,destinationAmount:"0",error:t.t0});case 12:case"end":return t.stop()}},t,null,[[1,9]])}))()}fetchTrade({sourceToken:e,destinationToken:t,sourceAmount:n,userAddress:r,slippage:s}){return Object(o.a)(a.a.mark(function o(){var c,u,i,d,p;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=Q.a.stringify({sellToken:e,buyToken:t,sellAmount:n,slippagePercentage:s/100}),a.next=3,R.a.get("".concat(J,"/swap/v0/quote?").concat(c)).then(e=>e.data);case 3:return u=a.sent,i=u.to,d=u.data,p=u.value,a.abrupt("return",{sourceToken:e,destinationToken:t,sourceAmount:n,destinationAmount:u.buyAmount,from:r,to:i,data:d,value:p});case 6:case"end":return a.stop()}},o)}))()}};const V={paraswap:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",oneInch:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",totle:"0x0000000000000000000000000000000000000000",dexag:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",zeroEx:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"};function W({sourceToken:e,destinationToken:t},n){const r=e=>"0x0000000000000000000000000000000000000000"===e?V[n]:e;return{sourceToken:r(e),destinationToken:r(t)}}function X({sourceToken:e,destinationToken:t},n){const r=e=>"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"===e?"0x0000000000000000000000000000000000000000":e;return{sourceToken:r(e),destinationToken:r(t)}}function Y(e,t,n,r={}){return Object(j.getERC20Contract)(e,n).approve(t,y.TOKEN_APPROVAL_AMOUNT,Object(O.a)({},r))}const Z={symbol:"ETH",decimals:18,address:"0x0000000000000000000000000000000000000000"};var $=class{constructor(e){this.network=void 0,this.aggregators=void 0,this.tokensReady=void 0,this.network=e,this.aggregators={paraswap:new D(this.network),oneInch:new _(this.network),totle:new G(this.network),dexag:new H(this.network),zeroEx:new K(this.network)},this.tokensReady=this.processTokensReadyPromises()}processTokensReadyPromises(){var e=this;return Object(o.a)(a.a.mark(function t(){var n,r,s,c,i,d,p;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.keys(e.aggregators),t.next=3,Promise.all(n.map(function(){var t=Object(o.a)(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.aggregators[n].fetchTokens());case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 3:return r=t.sent,s=r.map(e=>e.map(e=>Object(O.a)(Object(O.a)({},e),{},{address:e.address.toLowerCase()}))),c=s.map(e=>e.map(e=>e.address)),i=u.a.union(...c),d=u.a.compact(i.map(e=>u.a.find(u.a.flatten(s),t=>t.address===e))),p=[Z,...d.filter(e=>"ETH"!==e.symbol)],t.abrupt("return",u.a.uniqBy(p,"address"));case 10:case"end":return t.stop()}},t)}))()}validateRequestTokensForAgg({sourceToken:e,destinationToken:t},n){var r=this;return Object(o.a)(a.a.mark(function o(){var s;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.aggregators[n].tokensReady;case 2:if(s=a.sent,u.a.find(s,{address:e})){a.next=7;break}throw new Error("Source token not supported");case 7:if(u.a.find(s,{address:t})){a.next=9;break}throw new Error("Destination token not supported");case 9:case"end":return a.stop()}},o)}))()}fetchTrades({sourceToken:e,destinationToken:t,sourceAmount:n,userAddress:r,slippage:s},c){var u=this;return Object(o.a)(a.a.mark(function i(){var d,p,m;return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return d=Object.keys(u.aggregators),i.next=3,Promise.all(d.map(function(){var c=Object(o.a)(a.a.mark(function o(c){var i,d,p,m;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=Date.now(),a.prev=1,p=Object(O.a)({sourceAmount:n,userAddress:r,slippage:s},W({sourceToken:e,destinationToken:t},c)),a.next=5,u.validateRequestTokensForAgg(p,c);case 5:return a.next=7,u.aggregators[c].fetchTrade(p);case 7:m=a.sent,d=Object(O.a)(Object(O.a)({},m),X({sourceToken:m.sourceToken,destinationToken:m.destinationToken})),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),d={sourceToken:e,destinationToken:t,sourceAmount:n,error:a.t0};case 14:return a.abrupt("return",Object(O.a)(Object(O.a)({},d),{},{fetchTime:Date.now()-i,aggregator:c}));case 15:case"end":return a.stop()}},o,null,[[1,11]])}));return function(e){return c.apply(this,arguments)}}()));case 3:return p=i.sent,i.next=6,u.checkApprovals(p,c);case 6:return m=i.sent,i.abrupt("return",p.map((e,t)=>Object(O.a)(Object(O.a)({},e),{},{approvalNeeded:m[t]})));case 8:case"end":return i.stop()}},i)}))()}checkApprovals(e,t){return Object(o.a)(a.a.mark(function n(){var r,s,c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=new E.providers.Web3Provider(t.currentProvider),s=r.getSigner(),n.next=4,Promise.all(e.map(function(){var e=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.sourceToken!==Z.address&&!t.error){e.next=2;break}return e.abrupt("return",null);case 2:return n=(e=>{switch(t.aggregator){case"zeroEx":return Object(F.getContractAddressesForChainOrThrow)(1).erc20Proxy;case"totle":return"0x74758acfce059f503a7e6b0fc2c8737600f9f2c4";case"oneInch":return"0xe4c9194962532feb467dce8b3d42419641c6ed2e";case"dexag":return"0xccaf8533b6822a6c17b1059dda13c168e75544a4";default:return t.to}})(),e.next=5,Object(j.checkApproval)(t.sourceToken,n,s);case 5:if(e.sent){e.next=10;break}return e.abrupt("return",(e={})=>Y(t.sourceToken,n,s,e));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:return c=n.sent,n.abrupt("return",c);case 6:case"end":return n.stop()}},n)}))()}fetchQuotes({sourceToken:e,destinationToken:t,sourceAmount:n}){var r=this;return Object(o.a)(a.a.mark(function s(){var c;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c=Object.keys(r.aggregators),s.abrupt("return",Promise.all(c.map(function(){var s=Object(o.a)(a.a.mark(function o(s){var c,u,i,d;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=Date.now(),a.prev=1,i=Object(O.a)({sourceAmount:n},W({sourceToken:e,destinationToken:t},s)),a.next=5,r.validateRequestTokensForAgg(i,s);case 5:return a.next=7,r.aggregators[s].fetchQuote(i);case 7:d=a.sent,u=Object(O.a)(Object(O.a)({},d),X({sourceToken:d.sourceToken,destinationToken:d.destinationToken})),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),u={sourceToken:e,destinationToken:t,sourceAmount:n,error:a.t0};case 14:return a.abrupt("return",Object(O.a)(Object(O.a)({},u),{},{fetchTime:Date.now()-c,aggregator:s}));case 15:case"end":return a.stop()}},o,null,[[1,11]])}));return function(e){return s.apply(this,arguments)}}())));case 2:case"end":return s.stop()}},s)}))()}};function ee(e,t){return u.a.get(t.find(({symbol:t})=>t===e),"address")}function te(e,t,n){const r=n.find(({address:e})=>e.toLowerCase()===t.toLowerCase()).decimals;return new N.a(e).times(Math.pow(10,r)).toString()}function ne(e,t,n){const r=n.find(({address:e})=>e.toLowerCase()===t.toLowerCase()).decimals;return new N.a(e).dividedBy(Math.pow(10,r)).toFixed(4)}function re(e){const t=e.reduce((e,t)=>Number(t.destinationAmount)>e?Number(t.destinationAmount):e,0);return e.map(e=>{const n=(100*(t/Number(e.destinationAmount)-1)).toFixed(2);return Object(O.a)(Object(O.a)({},e),{},{markup:"+ ".concat(n,"%")})})}N.a.config({EXPONENTIAL_AT:1e9});var ae=n(133),oe=n.n(ae);var se=({label:e,transactionFn:t})=>{const n=Object(i.useState)(!1),r=Object(s.a)(n,2),a=r[0],o=r[1],c=Object(i.useState)(!1),u=Object(s.a)(c,2),p=u[0],m=u[1];return d.a.createElement(d.a.Fragment,null,p||a?d.a.createElement(b.a,null,"".concat(a?"Mining":""," ").concat(p?"Mined":""," ").concat(e)):null,p||a?null:d.a.createElement(v.a,{onClick:()=>{o(!0),t().then(()=>{o(!1),m(!0)}).catch(()=>{o(!1)})},disabled:a||p,label:"".concat(a?"Mining":""," ").concat(p?"Mined":""," ").concat(e)}))},ce=n(261),ue=n.n(ce);const ie="https://ethgasstation.airswap.io/ethgasAPI.json";const de=new class{constructor(){this.settings={},this.ready=this.pollGasSettings(),setInterval(()=>this.pollGasSettings(),6e4)}pollGasSettings(){var e=this;return Object(o.a)(a.a.mark(function t(){var n,r,o,s,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((e,t)=>{ue()(ie,{method:"get",mode:"cors"}).then(e=>(e.ok||t(e.statusText),e.json())).then(e)});case 2:return n=t.sent,r=n.fast,o=n.fastest,s=n.average,c=n.safeLow,e.settings=u.a.mapValues({fast:r,fastest:o,average:s,safeLow:c},e=>e/10),t.abrupt("return",e.settings);case 6:case"end":return t.stop()}},t)}))()}getGasSettingsForTransaction(e="fast",t=3e5){const n=this.settings[e],r=S.a.utils.parseUnits("".concat(n),"gwei").toNumber();return{gasLimit:Number(t),gasPrice:r}}},pe=new $(1),me="1",le="USDC",fe="DAI",ke=3,he="fast";function be(){const e=Object(i.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(ke),m=Object(s.a)(c,2),f=m[0],k=m[1],x=Object(i.useState)(null),O=Object(s.a)(x,2),j=O[0],y=O[1],E=Object(i.useState)(""),S=Object(s.a)(E,2),F=S[0],C=S[1],R=Object(i.useState)([]),P=Object(s.a)(R,2),N=P[0],L=P[1],D=Object(i.useState)([]),M=Object(s.a)(D,2),Q=M[0],I=M[1],_=Object(i.useState)(!1),B=Object(s.a)(_,2),q=B[0],z=B[1],G=Object(i.useState)(!1),U=Object(s.a)(G,2),H=U[0],J=U[1],K=Object(i.useState)(""),V=Object(s.a)(K,2),W=V[0],X=V[1],Y=Object(i.useState)(""),Z=Object(s.a)(Y,2),$=Z[0],ae=Z[1],ce=Object(i.useState)(le),ue=Object(s.a)(ce,2),ie=ue[0],be=ue[1],ge=Object(i.useState)(fe),Te=Object(s.a)(ge,2),we=Te[0],ve=Te[1],Ae=Object(i.useState)(me),xe=Object(s.a)(Ae,2),Oe=xe[0],je=xe[1],ye=Object(i.useState)(!1),Ee=Object(s.a)(ye,2),Se=Ee[0],Fe=Ee[1];function Ce(){return Re.apply(this,arguments)}function Re(){return(Re=Object(o.a)(a.a.mark(function e(){var t,r,o,s,c,u,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),X(""),e.next=4,ee(ie,Q);case 4:return t=e.sent,e.next=7,ee(we,Q);case 7:return r=e.sent,e.next=10,te(Oe,t,Q);case 10:if(o=e.sent,"0x0000000000000000000000000000000000000000"!==t){e.next=17;break}return e.next=14,j.eth.getBalance(n);case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,Object(h.getERC20BalanceOf)(t,n);case 19:e.t0=e.sent.toString();case 20:return s=e.t0,c=ne(s,t,Q),u=Number(c)>=Number(Oe),Fe(u),i=u?pe.fetchTrades({sourceAmount:o,sourceToken:t,destinationToken:r,userAddress:n,slippage:f},j):pe.fetchQuotes({sourceAmount:o,sourceToken:t,destinationToken:r}),e.prev=25,e.next=28,i.then(e=>L(re(e)));case 28:e.next=34;break;case 30:e.prev=30,e.t1=e.catch(25),z(!1),X(e.t1.message);case 34:z(!1);case 35:case"end":return e.stop()}},e,null,[[25,30]])}))).apply(this,arguments)}Object(i.useEffect)(()=>{window.ethereum.enable().then(([e])=>{y(new oe.a(window.ethereum)),r(e)}).catch(e=>C(e.message)),J(!0),pe.tokensReady.then(e=>{I(e),J(!1)}).catch(e=>{ae(e.message),J(!1)})},[]);const Pe=Q.map(e=>e.symbol),Ne=[{property:"aggregator",primary:!0,header:"Aggregator"},{property:"destinationAmount",header:"Return Amount",sortable:!0,render:e=>e.error?"N/A":d.a.createElement(b.a,null,ne(e.destinationAmount,e.destinationToken,Q)," ",u.a.get(Q.find(t=>e.destinationToken===t.address),"symbol"))},{property:"fetchTime",header:"Fetch Time (s)",render:e=>e.error?"N/A":d.a.createElement(b.a,null,e.fetchTime/1e3)},{property:"markup",header:"Markup",render:e=>e.error?"N/A":d.a.createElement(b.a,null,e.markup)},{property:"action",header:"Action",render:e=>Se?e.error?d.a.createElement(b.a,{size:"xsmall"},e.error.message):d.a.createElement(d.a.Fragment,null,e.approvalNeeded?d.a.createElement(se,{transactionFn:Object(o.a)(a.a.mark(function t(){var n,r,o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de.getGasSettingsForTransaction(he);case 2:return n=t.sent,r=n.gasPrice,t.next=6,e.approvalNeeded({gasPrice:r});case 6:return o=t.sent,(s=o.wait()).then(()=>Ce()),t.abrupt("return",s);case 10:case"end":return t.stop()}},t)})),label:"Approve Token"}):d.a.createElement(se,{label:"Trade",transactionFn:Object(o.a)(a.a.mark(function t(){var r,o,s,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de.getGasSettingsForTransaction(he);case 2:return r=t.sent,o=r.gasPrice,s={from:n,to:e.to,value:e.value,data:e.data,gas:15e5,gasPrice:o},t.next=7,j.eth.sendTransaction(s);case 7:return c=t.sent,t.abrupt("return",c);case 9:case"end":return t.stop()}},t)}))})):e.error?d.a.createElement(b.a,{size:"xsmall"},e.error.message):"Insufficient Balance"}];return d.a.createElement(p.a,{pad:"large",justify:"center",direction:"row"},d.a.createElement(p.a,{direction:"column"},d.a.createElement(g.a,{textAlign:"center"},"Aggregator Aggregator"),F,H?d.a.createElement(p.a,{align:"center",justify:"center",height:"300px"},d.a.createElement(l,null)):d.a.createElement(p.a,{align:"center",pad:"large",direction:"column"},d.a.createElement(T.a,{label:"From Amount",htmlFor:"from-amount"},d.a.createElement(w.a,{id:"from-amount",placeholder:"100",value:Oe,onChange:({target:{value:e}})=>{je(e)},onSelect:e=>je(e.suggestion)})),d.a.createElement(T.a,{label:"From Token",htmlFor:"from-token"},d.a.createElement(w.a,{id:"from-token",placeholder:"ETH",value:ie,onChange:({target:{value:e}})=>{be(e.toUpperCase())},onSelect:e=>be(e.suggestion),suggestions:Pe.filter(e=>e.includes(ie))})),d.a.createElement(T.a,{label:"To Token",htmlFor:"token-input"},d.a.createElement(w.a,{id:"token-input",placeholder:"DAI",value:we,onChange:({target:{value:e}})=>{ve(e.toUpperCase())},onSelect:e=>ve(e.suggestion),suggestions:Pe.filter(e=>e.includes(we))})),d.a.createElement(T.a,{label:"Max Slippage %",htmlFor:"slippage"},d.a.createElement(w.a,{id:"slippage",placeholder:"1",value:f,type:"number",onChange:({target:{value:e}})=>{k(Number(e))}}))),d.a.createElement(v.a,{disabled:!(we&&ie&&Oe&&Q.length),label:"Fetch Quotes",primary:!0,onClick:()=>Ce()}),d.a.createElement(p.a,{align:"center",margin:"medium"},$,W,q&&!W?d.a.createElement(p.a,null,d.a.createElement(l,null)):N.length?d.a.createElement(A.a,{data:u.a.sortBy(N,({destinationAmount:e})=>Number(e)).reverse(),columns:Ne,sortable:!0}):null)))}const ge=document.getElementById("root"),Te={global:{font:{family:"Lato"},colors:{brand:"#2b71ff",focus:"#2b71ff"}}},we=()=>d.a.createElement(x.a,{theme:Te},d.a.createElement(be,null));k.a.render(d.a.createElement(we,null),ge)}},[[268,1,2]]]);
//# sourceMappingURL=main.ba9dd29f.chunk.js.map